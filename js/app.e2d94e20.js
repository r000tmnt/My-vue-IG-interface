(function(e){function t(t){for(var o,i,c=t[0],r=t[1],d=t[2],u=0,l=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);f&&f(t);while(l.length)l.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},a={app:0},s=[];function c(e){return r.p+"js/"+({}[e]||e)+"."+{"chunk-2fab37ed":"9a8bde08","chunk-36384a5d":"dc258802","chunk-afb8a790":"e64dba73"}[e]+".js"}function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n={"chunk-2fab37ed":1,"chunk-36384a5d":1,"chunk-afb8a790":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-2fab37ed":"fcc4b575","chunk-36384a5d":"0ab4dbe4","chunk-afb8a790":"a0aafedd"}[e]+".css",a=r.p+o,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var d=s[c],u=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===o||u===a))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){d=l[c],u=d.getAttribute("data-href");if(u===o||u===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete i[e],f.parentNode.removeChild(f),n(s)},f.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){i[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=s);var d,u=document.createElement("script");u.charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.src=c(e);var l=new Error;d=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,n[1](l)}a[e]=void 0}};var f=setTimeout((function(){d({type:"timeout",target:u})}),12e4);u.onerror=u.onload=d,document.head.appendChild(u)}return Promise.all(t)},r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/My-vue-IG-interface/",r.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=t,d=d.slice();for(var l=0;l<d.length;l++)t(d[l]);var f=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"19e7":function(e,t,n){e.exports=n.p+"img/image.d16024c1.svg"},"32c2":function(e,t,n){"use strict";n("6fba")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),i=Object(o["g"])("header",{class:"bg_color"}," My Vue-IG-Interface ",-1),a={id:"fb-login"},s=Object(o["g"])("div",{style:{clear:"both"}},null,-1);function c(e,t,n,c,r,d){var u=Object(o["o"])("basicInfo"),l=Object(o["o"])("display-medias"),f=Object(o["o"])("displayStories"),m=Object(o["o"])("displayMention");return Object(o["j"])(),Object(o["d"])(o["a"],null,[i,Object(o["g"])("div",a,[Object(o["g"])("button",{onClick:t[1]||(t[1]=function(){return d.getLogin&&d.getLogin.apply(d,arguments)})},"登入FB")]),s,Object(o["g"])(u),"post"===d.currentLocation?(Object(o["j"])(),Object(o["d"])(l,{key:0})):Object(o["e"])("",!0),"story"===d.currentLocation?(Object(o["j"])(),Object(o["d"])(f,{key:1})):Object(o["e"])("",!0),"mention"===d.currentLocation?(Object(o["j"])(),Object(o["d"])(m,{key:2})):Object(o["e"])("",!0),Object(o["g"])("footer",{class:["bg_color",{hide_footer:!0===r.modal_open}]},"© 2021 ParkCorner",2)],64)}n("d3b7");var r=n("19e7"),d=n.n(r),u=n("9b70"),l=n.n(u),f=Object(o["u"])("data-v-60fdf9bb");Object(o["l"])("data-v-60fdf9bb");var m={class:"top_frame"},p={id:"fromData"},h={id:"profile",class:"flex"},g={class:"profile_pic"},b={class:"biography"},v={class:"counts flex"},j={id:"sections"},w={class:"flex"},O=Object(o["g"])("img",{src:d.a,alt:"Not found"},null,-1),k=Object(o["g"])("img",{src:l.a,alt:"Not found"},null,-1);Object(o["k"])();var _=f((function(e,t,n,i,a,s){return Object(o["j"])(),Object(o["d"])("div",m,[Object(o["g"])("div",{id:"banner",style:{"background-image":"url("+s.basic.profile_picture_url+")","background-size":"cover","background-position":"center",filter:"blur(5px)"}},null,4),Object(o["g"])("div",p,[Object(o["g"])("div",h,[Object(o["g"])("div",g,[Object(o["g"])("a",{class:["section story",{Here:"story"===s.currentLocation}],onClick:t[1]||(t[1]=function(e){return s.getStories()})},[Object(o["g"])("img",{src:s.basic.profile_picture_url,alt:"Not Found"},null,8,["src"])],2)]),Object(o["g"])("div",b,[Object(o["g"])("h1",null,Object(o["p"])(s.basic.username),1),Object(o["g"])("h4",null,[Object(o["f"])(Object(o["p"])(s.basic.biography)+" ",1),Object(o["g"])("a",{href:s.basic.website},Object(o["p"])(s.basic.website),9,["href"])]),Object(o["g"])("ul",v,[Object(o["g"])("li",null,"追蹤:"+Object(o["p"])(s.basic.followers_count),1),Object(o["g"])("li",null,"追蹤者:"+Object(o["p"])(s.basic.follows_count),1),Object(o["g"])("li",null,"上傳:"+Object(o["p"])(s.basic.media_count),1)])])])]),Object(o["g"])("div",j,[Object(o["g"])("ul",w,[Object(o["g"])("li",{class:["section post",{here:"post"===s.currentLocation}],onClick:t[2]||(t[2]=function(e){return s.refreash_Posts()})},[O],2),Object(o["g"])("li",{class:["section mention",{here:"mention"===s.currentLocation}],onClick:t[3]||(t[3]=function(e){return s.getTags()})},[k],2)])])])})),y={name:"basicInfo",computed:{Needed:function(){return this.$store.state.Needed},basic:function(){return this.$store.state.basic},currentLocation:function(){return this.$store.state.currentLocation},postRefreashed:function(){return this.$store.state.postRefreashed}},methods:{getStories:function(){this.$store.dispatch("getStories")},getTags:function(){this.$store.dispatch("getTags")},waitForRefreash:function(){var e=this,t={IGid:e.Needed.IGid,acToken:e.Needed.acToken};return new Promise((function(n,o){e.postRefreashed?n({message:"sucess",toDo:function(){e.$store.dispatch("getMedias",t)}}):o("error")}))},refreash_Posts:function(){var e=this;this.waitForRefreash().then((function(t){if(t.toDo(),!0===e.postRefreashed){var n="post";e.$store.commit("viewSection",n)}})).catch((function(e){console.log(e)}))}}};n("b5de");y.render=_,y.__scopeId="data-v-60fdf9bb";var T=y,M=Object(o["u"])("data-v-67feb2a8");Object(o["l"])("data-v-67feb2a8");var I={class:"frame"},P={key:0,id:"photos"},C={key:0,class:"more"};Object(o["k"])();var N=M((function(e,t,n,i,a,s){var c=Object(o["o"])("viewPics");return Object(o["j"])(),Object(o["d"])(o["a"],null,[Object(o["g"])("div",I,[s.media_posts.length>0?(Object(o["j"])(),Object(o["d"])("div",P,[(Object(o["j"])(!0),Object(o["d"])(o["a"],null,Object(o["n"])(s.mediaIndex,(function(e){return Object(o["j"])(),Object(o["d"])("div",{class:["medias",{fadeIN:s.fadeIN}],key:e,style:{"background-image":"url("+s.media_posts[e-1].media_url+")","background-size":"cover","background-position":"center"},onClick:function(t){return s.viewing(e)}},null,14,["onClick"])})),128)),!0===a.isViewing?(Object(o["j"])(),Object(o["d"])(c,{key:0,onClose:t[1]||(t[1]=function(e){return s.closeModal(e)}),onChangePic:t[2]||(t[2]=function(e){return s.clickedMedia_change(e)})})):Object(o["e"])("",!0)])):Object(o["e"])("",!0)]),s.basic.media_count!==s.mediaIndex?(Object(o["j"])(),Object(o["d"])("div",C,[Object(o["g"])("button",{class:"showMore",onClick:t[3]||(t[3]=function(e){return s.showMore()})},"更多")])):Object(o["e"])("",!0)],64)})),S=Object(o["h"])((function(){return n.e("chunk-36384a5d").then(n.bind(null,"b265"))})),x={name:"displayMedias",components:{viewPics:S},data:function(){return{isViewing:!1,addClass:!1,className:"modal_open",clickedMedia:{},payload:{place:"",data:void 0}}},computed:{media_posts:function(){return this.$store.state.media_posts},mediaIndex:function(){return this.$store.state.mediaIndex},fadeIN:function(){return this.$store.state.fadeIN},basic:function(){return this.$store.state.basic},Needed:function(){return this.$store.state.Needed},postRefreashed:function(){return this.$store.state.postRefreashed}},methods:{viewing:function(e){var t=this;this.clickedMedia=this.media_posts[e-1],this.getComments(this.clickedMedia).then((function(e){e.toDo(),t.$store.commit("defineScrollY",document.documentElement.style.getPropertyValue("--scroll-y"))})).then((function(){!0===t.isViewing&&void 0!==t.clickedMedia&&(t.$parent.modal_open=!0,t.addClass=!1,t.defineScrollbar())})).catch((function(){}))},getComments:function(e){var t=this;return new Promise((function(n,o){!0===t.isViewing?o("error"):n({message:"Make an api call",toDo:function(){t.$store.commit("toTheBox",t.payload={place:"clicked_Media",data:e}),t.$store.dispatch("searchComments",e),t.isViewing=!0}})}))},showMore:function(){this.$store.commit("showMore"),this.$nextTick((function(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}))},closeModal:function(e){var t=this;this.waitForRefreash().then((function(){t.$parent.modal_open=!1,t.isViewing=e.isViewing,t.addClass=e.addClass,t.defineScrollbar()}))},defineScrollbar:function(){var e=document.body;!1===this.addClass?e.classList.add(this.className):e.classList.remove(this.className)},clickedMedia_change:function(e){var t=this;this.waitForRefreash().then((function(n){n.toDo(),!0===t.postRefreashed&&(t.clickedMedia=t.media_posts[e],t.$store.commit("toTheBox",t.payload={place:"clicked_Media",data:t.clickedMedia}),t.$store.dispatch("searchComments",t.clickedMedia))}))},waitForRefreash:function(){var e=this,t={IGid:e.Needed.IGid,acToken:e.Needed.acToken};return new Promise((function(n,o){e.postRefreashed?n({message:"proceed to api call",toDo:function(){e.$store.dispatch("getMedias",t)}}):o("can not update")}))}}};n("32c2");x.render=N,x.__scopeId="data-v-67feb2a8";var B=x,D=Object(o["h"])((function(){return n.e("chunk-2fab37ed").then(n.bind(null,"65dd"))})),L=Object(o["h"])((function(){return n.e("chunk-afb8a790").then(n.bind(null,"2449"))})),F={name:"App",components:{basicInfo:T,displayMedias:B,displayStories:D,displayMention:L},computed:{currentLocation:function(){return this.$store.state.currentLocation}},data:function(){return{modal_open:!1}},methods:{getLogin:function(){this.$store.dispatch("getLogin")},scroll:function(){window.addEventListener("scroll",(function(){document.documentElement.style.setProperty("--scroll-y","".concat(window.scrollY,"px"))}))}},created:function(){var e=this;e.scroll(),window.fbAsyncInit=function(){window.FB.init({appId:"5243352622349206",cookie:!0,xfbml:!0,version:"v9.0"}),e.$store.dispatch("getLoginStatus")},function(e,t,n){var o,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(o=e.createElement(t),o.id=n,o.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk")}};n("fd10");F.render=c;var $=F,E=(n("a434"),n("b64b"),n("5502")),G=Object(E["a"])({state:{Needed:{IGid:"",acToken:""},payload:{place:"",data:void 0},basic:{},media_posts:[],media_stories:[],sts_length:0,media_mentions:[],clickedMedia:{},theMediaComment:[],currentLocation:"post",mediaIndex:9,fadeIN:!1,scrollY:"",isProcessing:!0,postRefreashed:!1,getData:[]},getters:{getClickedMedia:function(e){return e.clickedMedia}},mutations:{formNeeded:function(e,t){e.Needed.IGid=t.IGid,e.Needed.acToken=t.acToken},toTheBox:function(e,t){"basic"===t.place&&(e.basic=t.data),"post"===t.place&&(e.media_posts=t.data,e.postRefreashed=!0),"story"===t.place&&(e.media_stories=t.data),"mention"===t.place&&(e.media_mentions=t.data),"clicked_Media"===t.place&&(e.clickedMedia=t.data)},viewSection:function(e,t){"story"===t&&(e.currentLocation="story"),"mention"===t&&(e.currentLocation="mention"),"post"===t&&(e.currentLocation="post",e.fadeIN=!1,e.mediaIndex=9)},showMore:function(e){e.basic.media_count-e.mediaIndex>9?e.mediaIndex=e.mediaIndex+9:e.mediaIndex=e.basic.media_count,e.fadeIN=!0},defineScrollY:function(e,t){e.scrollY=t},clearComment:function(e){e.theMediaComment=[]},convertTime:function(e,t){var n=Array.isArray(t);if(void 0!==t)if(!0===n)for(var o=0;o<t.length;o++){var i=new Date(t[o].timestamp).getTime(),a=new Date(i).toDateString();t[o].timestamp=a}else for(var s=0;s<Object.keys(t).length;s++)void 0!==t[s]&&(i=new Date(t[s].timestamp).getTime(),a=new Date(i).toDateString(),t[s].timestamp=a)}},actions:{getLoginStatus:function(e){window.FB.getLoginStatus((function(t){if("connected"===t.status)var n=t.authResponse.accessToken;e.dispatch("getFBdata",n)}))},getLogin:function(){window.FB.login((function(){}),{scope:"public_profile, email, business_management, instagram_basic, instagram_content_publish, instagram_manage_comments"})},getFBdata:function(e,t){var n={FBid:"",acToken:""};window.FB.api("/me/accounts",{access_token:t},(function(o){null!==o.data&&(n.FBid=o.data[0].id,n.acToken=t),e.dispatch("getIGdata",n)}))},getIGdata:function(e,t){window.FB.api(t.FBid,{fields:"instagram_business_account",access_token:t.acToken},(function(n){var o={IGid:n.instagram_business_account.id,acToken:t.acToken};e.commit("formNeeded",o),e.dispatch("getBasic",o),e.dispatch("getMedias",o)}))},getBasic:function(e,t){window.FB.api(t.IGid,{fields:"biography,followers_count,follows_count,media_count,name,profile_picture_url,username,website",access_token:t.acToken},(function(t){e.commit("toTheBox",e.state.payload={place:"basic",data:t})}))},getMedias:function(e,t){window.FB.api(t.IGid+"/media",{fields:"media_url,caption,like_count,comments_count,timestamp",access_token:t.acToken},(function(t){for(var n=new Array,o=0;o<t.data.length;o++)n.push(t.data[o]),e.commit("convertTime",n);e.commit("toTheBox",e.state.payload={place:"post",data:n})}))},getStories:function(e){var t=new Array;window.FB.api(e.state.Needed.IGid,{fields:"stories",access_token:e.state.Needed.acToken},(function(n){if(n.stories){var o=n.stories.data;if(n.stories.data){for(var i=0;i<o.length;i++)t.push(n.stories.data[i].id);e.dispatch("waitForloop",t).then((function(t){t.toDo(),!1===e.state.isProcessing&&e.dispatch("toStories",e.state.getData),e.state.isProcessing=!0})).catch((function(){}))}}else{var a="story";e.commit("viewSection",a)}}))},waitForloop:function(e,t){return new Promise((function(n,o){e.state.isProcessing?n({message:"success",toDo:function(){e.state.sts_length=t.length;for(var n=0;n<t.length;n++)window.FB.api(t[n],"GET",{fields:"caption,media_url,timestamp",access_token:e.state.Needed.acToken},(function(t){e.state.getData.push(t),e.commit("convertTime",e.state.getData)}));e.state.isProcessing=!1}}):o("error")}))},toStories:function(e,t){e.dispatch("processStories",t).then((function(t){if(t.toDo(),0!==e.state.sts_length){var n="story";e.commit("viewSection",n)}}))},processStories:function(e,t){return new Promise((function(n,o){void 0===t?o("error"):n({message:"Proceeding to mutation",toDo:function(){e.commit("toTheBox",e.state.payload={place:"story",data:t})}})}))},getTags:function(e){var t=[];window.FB.api(e.state.Needed.IGid+"/tags","GET",{fields:"id,username,media_url",access_token:e.state.Needed.acToken},(function(n){if(n.data){for(var o=0;o<n.data.length;o++)t.push(n.data[o]);t.length>0&&(e.state.getData=t,e.dispatch("toMentions",e.state.getData))}}))},toMentions:function(e,t){e.dispatch("processMentions",t).then((function(t){if(t.toDo(),Object.keys(e.state.media_mentions).length>0){e.commit("convertTime",e.state.media_mentions);var n="mention";e.commit("viewSection",n),e.state.isProcessing=!0}})).catch((function(){e.state.isProcessing=!0}))},processMentions:function(e,t){return new Promise((function(n,o){e.state.isProcessing?n({message:"Proceeding to mutation",toDo:function(){e.commit("toTheBox",e.state.payload={place:"mention",data:t}),e.state.isProcessing=!1}}):o("error")}))},searchComments:function(e,t){e.dispatch("pin_point_Comments",t).then((function(t){t.toDo(),e.state.isProcessing=!0})).catch((function(){e.state.isProcessing=!0}))},pin_point_Comments:function(e,t){return new Promise((function(n,o){e.state.isProcessing?n({message:"Processing...",toDo:function(){e.dispatch("getComments",t),e.state.isProcessing=!1}}):o("pin-point failed")}))},getComments:function(e,t){window.FB.api(t.id,{fields:"comments{username, text, replies, timestamp}"},(function(t){if("comments"in t)for(var n=0;n<t.comments.data.length;n++)e.state.theMediaComment.push(t.comments.data[n])}))},pushComment:function(e,t){var n=new Date,o=n.toDateString();window.FB.api(t.id+"/comments","POST",{message:""+t.message},(function(n){e.state.theMediaComment.unshift({id:n.id,username:e.state.basic.username,text:t.message,timestamp:o})}))},deleteComment:function(e,t){window.FB.api(t.comment.id,"DELETE",(function(){e.state.theMediaComment.splice(t.index,1)}))}},modules:{}});Object(o["c"])($).use(G).mount("#app")},"6fba":function(e,t,n){},"8b82":function(e,t,n){},"9b70":function(e,t,n){e.exports=n.p+"img/pin.43782426.svg"},"9ef2":function(e,t,n){},b5de:function(e,t,n){"use strict";n("8b82")},fd10:function(e,t,n){"use strict";n("9ef2")}});
//# sourceMappingURL=app.e2d94e20.js.map